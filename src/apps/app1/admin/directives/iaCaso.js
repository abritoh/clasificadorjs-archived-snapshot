angular.module("APP-CLASIFICADOR-ADMIN").directive("iaCaso",["PARAMETROS","$timeout","AppModelService",function(a,i,e){return{restrict:"AE",replace:!0,require:"ngModel",link:function(n,o,d,l){n.MODE="agregar",n.iaName=d.iaName?d.iaName:"",n.mode=d.mode?d.mode:n.MODE,n.form_valid=!1,n.dx={nombre:null,descripcionCaso:null,fechaInicio:{anio:null,mes:null,dia:null},fechaFin:{anio:null,mes:null,dia:null},prioridad:null,activo:null},l.$render=function(){l&&l.$modelValue&&(l.$modelValue.data={valid:!1});var a=l.$modelValue;n.dx.nombre=a.nombre?a.nombre:"",n.dx.descripcionCaso=a.descripcionCaso?a.descripcionCaso:"",n.dx.fechaInicio=a.fechaInicio?a.fechaInicio:{anio:null,mes:null,dia:null},n.dx.fechaFin=a.fechaFin?a.fechaFin:{anio:null,mes:null,dia:null},n.dx.prioridad=a.prioridad?a.prioridad:null,"agregar"===d.mode?n.dx.activo=null:n.dx.activo=g_utils.is_true(a.activo)},n.$watch("dx.nombre",(function(){l.$modelValue.nombre=n.dx.nombre?n.dx.nombre:""})),n.$watch("dx.descripcionCaso",(function(){l.$modelValue.descripcionCaso=n.dx.descripcionCaso?n.dx.descripcionCaso:""})),n.$watch("dx.fechaInicio",(function(){l.$modelValue.fechaInicio=n.dx.fechaInicio?n.dx.fechaInicio:{anio:null,mes:null,dia:null}})),n.$watch("dx.fechaFin",(function(){l.$modelValue.fechaFin=n.dx.fechaFin?n.dx.fechaFin:{anio:null,mes:null,dia:null}})),n.$watch("dx.prioridad",(function(){l.$modelValue.prioridad=n.dx.prioridad?n.dx.prioridad:""})),n.$watch("dx.activo",(function(){null!==n.dx.activo&&(l.$modelValue.activo=g_utils.is_true(n.dx.activo))})),n.validate=function(){return n.form_valid=n.this_form.$valid&&n.dx.fechaInicio.data.valid,n.form_valid},n.aceptar=function(){var i=n.validate(),e={iaName:n.iaName,valid:i};n.$emit(a.EVENTOS.caso_aceptar,e)},n.cancelar=function(){var i={iaName:n.iaName,cancel:!0};n.$emit(a.EVENTOS.caso_aceptar,i)},i((function(){var i;i=function(){},e.getJsonList(a.URL.get_list_prioridad,(function(a){n.get_list_prioridad=a.data.data,angular.isFunction(i)&&i(a.data.data)}))}))},scope:{},templateUrl:"apps/app1/admin/directives/templates/iaCaso.html"}}]);