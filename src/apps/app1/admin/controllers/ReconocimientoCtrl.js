angular.module("APP-CLASIFICADOR-ADMIN").controller("ReconocimientoCtrl",["$rootScope","$scope","$location","$compile","PARAMETROS","AppModelService",function(t,a,e,n,o,r){t.currentViewName="Patrones de Reconocimiento",a.ArrayData=[],a.currentItem=null,a.totalRes=0,a.reloadData=!1;var c=null;function i(){c&&c.$destroy(),$("#component_container").empty()}function l(t){i(),c=a.$new();var e='<div ia-reconocimiento ng-model="currentItem" ia-name="reconocimiento_component" mode="{0}"></div>'.cformat(t),o=n(e)(c);$("#component_container").append(o)}a.loadData=function(t,e,n,c){var i={numeroDePagina:n,numeroDeResultados:o.PAGINADO_DEFAULT};a.totalRes=c,r.post(o.URL.get_list_tipo_patrones,i,(function(n){n.data.success?(n.data.data.length>0&&0===a.totalRes&&(a.totalRes=n.data.data[0].totalRes),t(n.data.data)):e()}),(function(){e()}))},a.viewItem=function(t,e,n){angular.forEach(a.ArrayData,(function(t,a){delete t.selected})),this.item.selected=!0,a.currentItem=this.item,l("editar")},a.addNew=function(){a.currentItem={},l("agregar")},a.$on(o.EVENTOS.ia_reconocimiento_event,(function(t,e){"aceptar"===e.action?a.save(e):(a.currentItem=null,i())})),a.setPalabrasClave=function(t){return a.palabras=t.join(", "),a.palabras.length>100&&(a.palabras=a.palabras.substring(0,100)+"..."),a.palabras},a.save=function(t){switch(t.mode){case"agregar":case"editar":var e=t.data;r.post(o.URL.guardar_patron,e,(function(t){t.data.success?(a.currentItem=null,i()):g_utils.prompt_msg(o.MSG.ERROR_PATRON)}),(function(){}));break}},a.logout=function(){e.path(o.APP1.ACTION.LOGIN)}}]);